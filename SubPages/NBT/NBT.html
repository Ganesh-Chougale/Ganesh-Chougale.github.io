<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Newspaper Business Tracker</title>

  <!-- CDN loader -->
  <script>
    fetch('../../Assets/Utils/cdn.html')
      .then(r => r.text())
      .then(d => document.head.insertAdjacentHTML('beforeend', d));
  </script>

  <!-- jQuery (needed for bootstrap-select) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Bootstrap 5 JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Bootstrap-select -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="NBT.css" />
</head>
<body class="container my-5">
  <h2 class="text-center mb-4">ðŸ“° Newspaper Business Tracker</h2>

  <!-- Billing -->
  <details class="mb-3">
    <summary class="h5">Billing</summary>
    <form id="billingForm" class="mt-3">
      <div class="input-group mb-2">
        <select class="form-select selectpicker" data-live-search="true" multiple id="billingCustomer" name="customer[]">
          <!-- Options will be loaded dynamically -->
        </select>
        <button class="btn btn-outline-secondary" type="button" id="addBillingCustomer">+ New Customer</button>
      </div>
      <div class="input-group mb-2">
        <input type="date" class="form-control" name="date" id="billingDate" required>
        <button class="btn btn-outline-secondary" type="button" onclick="document.getElementById('billingDate').value = new Date().toISOString().split('T')[0]">ðŸ“… Today</button>
      </div>
      <input type="number" class="form-control mb-2" name="amount" placeholder="Amount Paid" required>
      <input type="number" class="form-control mb-2" name="advance" placeholder="Advance (if any)">
      <textarea class="form-control mb-2" name="description" rows="2" placeholder="Description / Notes"></textarea>
      <button class="btn btn-primary">Save Billing</button>
    </form>
    <div class="mt-3">
      <button class="btn btn-sm btn-outline-primary" id="refreshBilling">ðŸ”„ Refresh Records</button>
      <table class="table table-sm table-striped mt-2" id="billingTable">
        <thead><tr><th>Customer</th><th>Date</th><th>Amount</th><th>Advance</th><th>Description</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </details>

  <!-- Retail -->
  <details class="mb-3">
    <summary class="h5">Retail Sell</summary>
    <form id="retailForm" class="mt-3">
      <div class="input-group mb-2">
        <select class="form-select selectpicker" data-live-search="true" multiple id="retailCustomer" name="customer[]">
          <!-- Options will be loaded dynamically -->
        </select>
        <button class="btn btn-outline-secondary" type="button" id="addRetailCustomer">+ New Customer</button>
      </div>
      <div class="input-group mb-2">
        <input type="date" class="form-control" name="date" id="retailDate" required>
        <button class="btn btn-outline-secondary" type="button" onclick="document.getElementById('retailDate').value = new Date().toISOString().split('T')[0]">ðŸ“… Today</button>
      </div>
      <input type="number" class="form-control mb-2" name="amount" placeholder="Total Amount" required>
      <input type="number" class="form-control mb-2" name="paid" placeholder="Paid Amount" required>
      <input type="number" class="form-control mb-2" name="remaining" placeholder="Remaining" readonly>
      <textarea class="form-control mb-2" name="description" rows="2" placeholder="Description / Notes"></textarea>
      <button class="btn btn-success">Save Retail</button>
    </form>
    <div class="mt-3">
      <button class="btn btn-sm btn-outline-success" id="refreshRetail">ðŸ”„ Refresh Records</button>
      <table class="table table-sm table-striped mt-2" id="retailTable">
        <thead><tr><th>Customer</th><th>Date</th><th>Amount</th><th>Paid</th><th>Remaining</th><th>Description</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </details>

  <!-- New Changes -->
  <details class="mb-3">
    <summary class="h5">New Changes</summary>
    <form id="changesForm" class="mt-3">

      <!-- Customer -->
      <div class="input-group mb-2">
        <select class="form-select selectpicker" data-live-search="true" multiple id="changesCustomer" name="customer[]">
          <!-- Options will be loaded dynamically -->
        </select>
        <button class="btn btn-outline-secondary" type="button" id="addChangesCustomer">+ New Customer</button>
      </div>

      <!-- Date -->
      <div class="input-group mb-2">
        <input type="date" class="form-control" name="date" id="changesDate" required>
        <button class="btn btn-outline-secondary" type="button" onclick="document.getElementById('changesDate').value = new Date().toISOString().split('T')[0]">ðŸ“… Today</button>
      </div>

      <!-- Paper -->
      <div class="input-group mb-2">
        <select class="form-select selectpicker" data-live-search="true" id="paperSelect" name="paper">
          <!-- Options will be loaded dynamically -->
        </select>
        <button class="btn btn-outline-secondary" type="button" id="addPaper">+ New Paper</button>
      </div>

      <!-- Description -->
      <textarea class="form-control mb-2" name="description" rows="3" placeholder="Describe the change"></textarea>
      
      <button class="btn btn-warning">Save Change</button>
    </form>

    <div class="mt-3">
      <button class="btn btn-sm btn-outline-warning" id="refreshChanges">ðŸ”„ Refresh Records</button>
      <table class="table table-sm table-striped mt-2" id="changesTable">
        <thead><tr><th>Customer</th><th>Date</th><th>Paper</th><th>Description</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </details>

  <!-- Status -->
  <div id="status" class="mt-4 text-center text-muted"></div>

  <!-- App JS -->
  <script type="module" src="NBT.js"></script>
</body>
</html>
